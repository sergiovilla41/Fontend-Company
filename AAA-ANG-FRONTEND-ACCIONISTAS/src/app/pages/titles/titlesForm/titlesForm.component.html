<mat-progress-bar mode="indeterminate" *ngIf="!loadings"></mat-progress-bar>

<div class="px-5 text-center-test animate-fadeIn pt-20" *ngIf="!loadings">
  <div class="field col-12 md:col-6">

    <div class="grid p-fluid">

      <p-skeleton width="15rem" styleClass="mb-9" class="px-5" borderRadius="16px"></p-skeleton>

      <div class="flex flex-wrap gap-3 mb-11 px-8">

        <div class="flex-auto px-8 pr-0 ml-0 select-container">
          <p-skeleton height="4rem" borderRadius="16px"></p-skeleton>
        </div>

        <div class="flex-auto px-8 pr-0 ml-0 select-container">
          <p-skeleton height="4rem" borderRadius="16px"></p-skeleton>
        </div>


        <div class="flex-auto px-8 pr-0 ml-0 select-container">
          <p-skeleton height="4rem" borderRadius="16px"></p-skeleton>
        </div>

      </div>


      <div class="flex flex-wrap gap-3 mb-11 px-8">

        <div class="flex-auto px-8 pr-0 ml-0 select-container">
          <p-skeleton height="4rem" borderRadius="16px"></p-skeleton>
        </div>

      </div>

    </div>

  </div>
</div>



<div class="px-5 text-center-test animate-fadeIn zindex" *ngIf="loadings">

  <div>
    <button pButton type="button" icon="pi pi-arrow-left" (click)="goBack()" label="Cerrar" class="volver"></button>
  </div>

  <form class="mt-8 space-y-6" [formGroup]="form">

    <div class="card shadow border-round border-gray-300 pb-5">
      <div class="mb-11 pt-8 pl-12">
        <h1>{{task}} título</h1>
      </div>

      <div class="grid p-fluid">

        <div class="flex flex-wrap gap-3 mb-11 px-8">
          <div class="flex-auto px-8 pr-0 ml-0">
            <p-dropdown [options]="accionistas" [(ngModel)]="selectedShareholders"
              formControlName="selectedShareholders" name="selectedShareholders" optionLabel="PRIMER_NOMBRE"
              [filter]="true" filterBy="PRIMER_NOMBRE,IDENTIFICACION" [showClear]="true" placeholder="Accionista"
              [virtualScroll]="true" [virtualScrollItemSize]="38">
              <ng-template pTemplate="selectedItem">
                <div class="" *ngIf="selectedShareholders">
                  <div>{{selectedShareholders.IDENTIFICACION}} - {{selectedShareholders.PRIMER_NOMBRE}} {{selectedShareholders.PRIMER_APELLIDO}}</div>
                </div>
              </ng-template>
              <ng-template let-accionistas pTemplate="item">
                <div class="">
                  <div>{{accionistas.IDENTIFICACION}} - {{accionistas.PRIMER_NOMBRE }} {{accionistas.PRIMER_APELLIDO}}</div>
                </div>
              </ng-template>
            </p-dropdown>
            <div
              *ngIf="form.get('selectedShareholders').invalid && (form.get('selectedShareholders').dirty || form.get('selectedShareholders').touched)">
              <div *ngIf="form.get('selectedShareholders').errors.required"
                style="color: #0c82c5; height: 1px; width: 100%;" class="animate-fadeInDown">
                <p>Este
                  campo es obligatorio.</p>
              </div>
            </div>
          </div>

          <div class="pt-4">
            <em class="fa-sharp fa-solid fa-circle-info fa-lg" pTooltip="Campo obligatorio" tooltipPosition="top"
              style="color: #0c82c5;"></em>
          </div>



          <div class="flex-auto px-8 pr-0 ml-0" id="segundo">
            <span class="p-float-label">
              <input formControlName="consecutivo" name="consecutivo" type="text"
                placeholder="Escribe el consecutivo asignado" pInputText>
              <label for="consecutivo">Consecutivo del título</label>
            </span>
            <div
              *ngIf="form.get('consecutivo').invalid && (form.get('consecutivo').dirty || form.get('consecutivo').touched)">
              <div *ngIf="form.get('consecutivo').errors.required" style="color: #0c82c5; height: 1px; width: 100%;"
                class="animate-fadeInDown">
                <p>Este
                  campo es obligatorio.</p>
              </div>
            </div>
          </div>


          <div class="pt-4">
            <em class="fa-sharp fa-solid fa-circle-info fa-lg" pTooltip="Campo obligatorio" tooltipPosition="top"
              style="color: #0c82c5;"></em>
          </div>

          <div class="flex-auto px-8 pr-0 ml-0">
            <span class="p-float-label">
              <p-calendar [(ngModel)]="fechaEntregaTitulo" formControlName="fechaEntregaTitulo" dateFormat="dd-mm-yy"
                [maxDate]="maxDate" inputId="fechaEntregaTitulo"></p-calendar>
              <label for="fechaEntregaTitulo">Fecha de entrega del titulo</label>
            </span>
            <div
              *ngIf="form.get('fechaEntregaTitulo').invalid && (form.get('fechaEntregaTitulo').dirty || form.get('fechaEntregaTitulo').touched)">
              <div *ngIf="form.get('fechaEntregaTitulo').errors.required"
                style="color: #0c82c5; height: 1px; width: 100%;" class="animate-fadeInDown">
                <p>Este
                  campo es obligatorio.</p>
              </div>
            </div>
          </div>

          <div class="pt-4">
            <em class="fa-sharp fa-solid fa-circle-info fa-lg" pTooltip="Campo obligatorio" tooltipPosition="left"
              style="color: #0c82c5;"></em>
          </div>


        </div>
        <div class="flex flex-wrap gap-3 mb-11 px-8">

          <div class="flex-auto px-8 pr-0 ml-0">
            <span class="p-float-label">
              <input formControlName="observacion" name="observacion" type="text" placeholder="Escribe la Observación"
                pInputText>
              <label for="consecutivo">Observación</label>
            </span>
            <div
              *ngIf="form.get('observacion').invalid && (form.get('observacion').dirty || form.get('observacion').touched)">
              <div *ngIf="form.get('observacion').errors.required" style="color: #0c82c5; height: 1px; width: 100%;"
                class="animate-fadeInDown">
                <p>Este
                  campo es obligatorio.</p>
              </div>
            </div>
          </div>
          <div class="pt-4">
            <em class="fa-sharp fa-solid fa-circle-info fa-lg" pTooltip="Campo obligatorio" tooltipPosition="left"
              style="color: #0c82c5;"></em>
          </div>

        </div>
      </div>
      <p-divider class="flex px-8"></p-divider>


      <div class="flex justify-end pt-3 px-8">
        <!--       <button pButton type="button" (click)="confirm($event)" label="Eliminar"
          class="p-button-rounded botonesPadding p-button-sm p-button-outlined" *ngIf="this.task == 'Edición'"></button> -->
        <button pButton (click)="confirm($event)" label="Guardar"
          class="p-button-rounded botonesPadding p-button-sm"></button>
      </div>

    </div>

  </form>
</div>
